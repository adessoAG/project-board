<div class="search-input-wrapper">
  <div class="imageWrapper">
    <div class="input-group search-input-inner-wrapper">
      <label for="search" class="sr-only">Suche</label>
      <span class="square"><mat-icon>search</mat-icon></span>
      <input #search [(ngModel)]="searchText" (ngModelChange)="searchProjects()" class="search form-control" type="text" name="search" id="search" placeholder="Projekte suchen...">
    </div>
  </div>
</div>

<div class="outer">
  <div class="inner">
    <table id="result-table">
      <thead>
      <tr style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;" *ngIf="!loadingProjects">
        <th id="total-hits">{{projects?.length || 'Keine'}} Treffer{{searchText != '' ? ' f√ºr "' + searchText + '"' : ''}}</th>
        <th class="hover-change" *ngIf="!mobile" (click)="sortByLocation(1)">Standort
          <mat-icon *ngIf="sortMemory === 1 && sortValue !== 0">{{(sortValue === 1) ? 'expand_less' : 'expand_more'}}</mat-icon>
        </th>
        <th class="hover-change" *ngIf="!mobile">Beginn</th>
        <th class="hover-change" *ngIf="!mobile">Aufwand</th>
      </tr>
      </thead>
      <tbody *ngIf="!loadingProjects && projects.length > 0">
      <tr *ngFor="let p of projects" (click)="openDialog(p)">
        <th>
          <table class="fixed-project-info hover-change">
            <tbody>
            <tr [ngClass]="{'mobile': mobile}">
              <td class="icons">
                <mat-icon title="{{bmTooltip}}" *ngIf="isProjectBookmarked(p.id)">bookmark</mat-icon>
                <mat-icon title="{{appTooltip}}" *ngIf="!isProjectApplicable(p.id)">email</mat-icon>
              </td>
              <td class="td-project-title title-clickable">{{p.title}}</td>
            </tr>
            </tbody>
          </table>
        </th>
        <td *ngIf="!mobile" class="hover-change">{{p.location}}</td>
        <td *ngIf="!mobile" class="hover-change">{{p.operationStart}}</td>
        <td *ngIf="!mobile" class="hover-change">{{p.effort}}</td>
      </tr>
      </tbody>
    </table>
    <div *ngIf="loadingProjects" style="width: 100%; margin-top: 1rem">
      <div class="loading-spinner">
        <mat-spinner [diameter]="50"></mat-spinner>
      </div>
    </div>
  </div>
</div>
